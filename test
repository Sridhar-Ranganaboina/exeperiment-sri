const jsdom = require("jsdom");
const { JSDOM } = jsdom;

// Set up a DOM-like environment for jQuery
const { window } = new JSDOM(`
    <html>
        <body>
            <div id="formDialog" data-kendo-dialog>
                <div class="k-dialog"></div>
            </div>
        </body>
    </html>
`);

// Attach jsdom to the global object
global.window = window;
global.document = window.document;
global.navigator = { userAgent: "node.js" };
const $ = require("jquery")(window); // Initialize jQuery with the jsdom window

// Mock the `kendoDialog` to avoid issues
$.fn.data = function () {
    return {
        open: jasmine.createSpy("open"), // Mock the open method
    };
};

// The function being tested
function showFormDialog() {
    $("#formDialog").data("kendoDialog").open();
}

// Jasmine test suite
describe("showFormDialog", function () {
    it("should open the dialog", function () {
        // Call the function being tested
        showFormDialog();

        // Verify that the `data` method was called with "kendoDialog"
        expect($("#formDialog").data).toHaveBeenCalledWith("kendoDialog");

        // Verify that the `open` method was called
        const dialogInstance = $("#formDialog").data("kendoDialog");
        expect(dialogInstance.open).toHaveBeenCalled();
    });
});
