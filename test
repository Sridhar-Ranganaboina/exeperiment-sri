const jsdom = require("jsdom");
const { JSDOM } = jsdom;

const { window } = new JSDOM(`
    <html>
        <body>
            <div id="formDialog" data-kendo-dialog>
                <div class="k-dialog"></div>
            </div>
        </body>
    </html>
`);
const $ = require("jquery")(window);

function showFormDialog() {
    $("#formDialog").data("kendoDialog").open();
}

describe("showFormDialog", () => {
    beforeEach(() => {
        jest.spyOn($.fn, "data").mockImplementation(() => ({
            open: jest.fn(),
        }));
    });

    it("should open the dialog", () => {
        showFormDialog();

        expect($.fn.data).toHaveBeenCalledWith("kendoDialog");
        expect($.fn.data().open).toHaveBeenCalled();
    });
});
